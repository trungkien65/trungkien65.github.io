---
/**
 * Hiá»‡u á»©ng cursor: khi di chuyá»ƒn chuá»™t, kÃ©o theo hoa mai, trÃ¡i tim, tiá»n xu...
 * Cháº¡y báº±ng script client (mousemove).
 */
// Emoji hiá»ƒn thá»‹ theo chuá»™t - cÃ³ thá»ƒ sá»­a list táº¡i Ä‘Ã¢y
const trailEmojis = ["ğŸŒ¸", "â¤ï¸", "ğŸª™", "âœ¨", "ğŸŒº", "ğŸ’®"];
---

<div id="cursor-trail-root" class="cursor-trail" aria-hidden="true"></div>

<script define:vars={{ trailEmojis }}>
  (function () {
    const root = document.getElementById("cursor-trail-root");
    if (!root) return;

    const emojis = Array.isArray(trailEmojis) && trailEmojis.length ? trailEmojis : ["ğŸŒ¸"];
    const maxTrail = 20; // Sá»‘ pháº§n tá»­ tá»‘i Ä‘a trÃªn mÃ n hÃ¬nh
    const throttleMs = 50;

    let lastTime = 0;
    function onMove(e) {
      const now = Date.now();
      if (now - lastTime < throttleMs) return;
      lastTime = now;

      const span = document.createElement("span");
      span.className = "cursor-trail__item";
      span.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      span.style.left = e.clientX + "px";
      span.style.top = e.clientY + "px";
      root.appendChild(span);

      // Giá»›i háº¡n sá»‘ pháº§n tá»­, xÃ³a cÅ©
      while (root.children.length > maxTrail) root.removeChild(root.firstChild);

      setTimeout(() => {
        span.classList.add("cursor-trail__item--out");
        setTimeout(() => span.remove(), 400);
      }, 800);
    }

    document.addEventListener("mousemove", onMove, { passive: true });
  })();
</script>

<style>
  .cursor-trail {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9999;
  }
  .cursor-trail__item {
    position: absolute;
    transform: translate(-50%, -50%);
    font-size: 1.25rem;
    opacity: 0.9;
    transition: opacity 0.3s ease, transform 0.3s ease;
    user-select: none;
  }
  .cursor-trail__item--out {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
  }
</style>
