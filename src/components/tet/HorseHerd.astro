---
/**
 * Đàn ngựa chạy từ trái sang phải (nhiều con, tốc độ/độ trễ khác nhau).
 * Dùng cùng SVG ngựa trắng, mỗi con một hàng, animation trái → phải.
 */
// Nhiều ngựa hơn: thêm/bớt phần tử hoặc đổi top, duration, delay
const horses = [
  { top: "8%", duration: 9, delay: 0 },
  { top: "16%", duration: 11, delay: 1.2 },
  { top: "24%", duration: 8.5, delay: 0.5 },
  { top: "32%", duration: 10, delay: 2 },
  { top: "40%", duration: 9, delay: 0.8 },
  { top: "48%", duration: 11.5, delay: 1.5 },
  { top: "56%", duration: 8, delay: 0.2 },
  { top: "64%", duration: 10.5, delay: 1.8 },
  { top: "72%", duration: 9.5, delay: 0.6 },
  { top: "80%", duration: 10, delay: 1 },
  { top: "88%", duration: 8.8, delay: 0.4 },
]
---

<div class="horse-herd" aria-hidden="true">
  {horses.map((h, i) => (
    <div
      class="horse-herd__item"
      style={`--top: ${h.top}; --duration: ${h.duration}s; --delay: ${h.delay}s`}
    >
      <div class="horse-herd__run">
        <svg
          class="horse-herd__svg"
          viewBox="0 0 120 80"
          xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true"
        >
          <g class="horse-body">
            <path class="horse-tail" fill="none" stroke="#e8e8e8" stroke-width="3" stroke-linecap="round" d="M18 42 Q8 38 12 28 Q14 22 20 18" />
            <ellipse class="horse-torso" cx="45" cy="42" rx="28" ry="14" fill="#fff" stroke="#ddd" stroke-width="1.5" />
            <path class="horse-mane" fill="none" stroke="#f0f0f0" stroke-width="2.5" stroke-linecap="round" d="M68 32 Q72 28 78 30 Q82 34 80 38 Q76 42 72 40" />
            <path class="horse-neck" fill="#fff" stroke="#ddd" stroke-width="1.2" d="M68 36 L88 28 L92 32 L72 40 Z" />
            <ellipse class="horse-head" cx="95" cy="28" rx="12" ry="10" fill="#fff" stroke="#ddd" stroke-width="1.5" />
            <path class="horse-ear" fill="#fff" stroke="#ddd" stroke-width="1" d="M102 22 L108 16 L110 22 Z" />
            <circle class="horse-eye" cx="100" cy="27" r="2" fill="#333" />
            <path fill="none" stroke="#ddd" stroke-width="1" d="M104 30 L112 29" />
            <g class="horse-leg horse-leg-fl">
              <line x1="62" y1="52" x2="62" y2="68" stroke="#ddd" stroke-width="3" stroke-linecap="round" />
              <line x1="62" y1="68" x2="60" y2="78" stroke="#ddd" stroke-width="2" stroke-linecap="round" />
            </g>
            <g class="horse-leg horse-leg-fr">
              <line x1="72" y1="52" x2="72" y2="66" stroke="#ddd" stroke-width="3" stroke-linecap="round" />
              <line x1="72" y1="66" x2="74" y2="76" stroke="#ddd" stroke-width="2" stroke-linecap="round" />
            </g>
            <g class="horse-leg horse-leg-bl">
              <line x1="28" y1="52" x2="28" y2="68" stroke="#ddd" stroke-width="3" stroke-linecap="round" />
              <line x1="28" y1="68" x2="26" y2="78" stroke="#ddd" stroke-width="2" stroke-linecap="round" />
            </g>
            <g class="horse-leg horse-leg-br">
              <line x1="38" y1="52" x2="38" y2="66" stroke="#ddd" stroke-width="3" stroke-linecap="round" />
              <line x1="38" y1="66" x2="40" y2="76" stroke="#ddd" stroke-width="2" stroke-linecap="round" />
            </g>
          </g>
        </svg>
      </div>
    </div>
  ))}
</div>

<style>
  .horse-herd {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
  }

  .horse-herd__item {
    position: absolute;
    left: 0;
    top: var(--top);
    width: 70px;
    height: 47px;
    transform: translateY(-50%);
    animation: herdRunRight var(--duration) linear infinite;
    animation-delay: var(--delay);
  }

  /* Chạy từ trái ra phải, lặp (bắt đầu ngoài màn hình trái) */
  @keyframes herdRunRight {
    0% {
      transform: translateY(-50%) translateX(-100px);
    }
    100% {
      transform: translateY(-50%) translateX(calc(100vw + 100px));
    }
  }

  .horse-herd__run {
    width: 100%;
    height: 100%;
    animation: herdBounce 0.22s ease-in-out infinite;
  }

  @keyframes herdBounce {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-3px);
    }
  }

  .horse-herd__svg {
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.15));
  }

  .horse-leg-fl {
    transform-origin: 62px 52px;
    animation: legFront 0.2s ease-in-out infinite;
  }
  .horse-leg-fr {
    transform-origin: 72px 52px;
    animation: legFront 0.2s ease-in-out infinite 0.1s;
  }
  .horse-leg-bl {
    transform-origin: 28px 52px;
    animation: legBack 0.2s ease-in-out infinite 0.05s;
  }
  .horse-leg-br {
    transform-origin: 38px 52px;
    animation: legBack 0.2s ease-in-out infinite 0.15s;
  }

  @keyframes legFront {
    0%,
    100% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(18deg);
    }
  }

  @keyframes legBack {
    0%,
    100% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(-18deg);
    }
  }

  .horse-tail {
    transform-origin: 18px 42px;
    animation: tailSway 0.28s ease-in-out infinite;
  }

  @keyframes tailSway {
    0%,
    100% {
      transform: rotate(-5deg);
    }
    50% {
      transform: rotate(8deg);
    }
  }
</style>
